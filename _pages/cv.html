---
layout: archive
title: "CV"
permalink: /cv/
author_profile: true
---

{% include base_path %}

<!-- 样式 -->
<style>
  @media (prefers-color-scheme: dark) {
    canvas {
      background-color: white !important;
    }
  }

  #pdf-container {
    width: 100%;
    padding: 1rem 0;
  }

  .pdf-page {
    display: block;
    margin: 1rem auto;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    background: white;
    width: 100%;
    max-width: 800px;
  }

  @media (max-width: 768px) {
    .pdf-page {
      max-width: 95%;
    }
  }
</style>

<!-- 容器 -->
<div id="pdf-container">
  <p>Loading CV...</p>
</div>

<!-- PDF.js CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
<script>
  const pdfUrl = '{{ "/files/cv.pdf" | relative_url }}'; // 适配 Jekyll baseurl
  const container = document.getElementById("pdf-container");

  // 设置 worker 路径
  pdfjsLib.GlobalWorkerOptions.workerSrc = "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";

  // 加载并渲染 PDF
  pdfjsLib.getDocument(pdfUrl).promise.then(pdf => {
    container.innerHTML = ""; // 清空 loading 提示

    for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
      pdf.getPage(pageNum).then(page => {
        const scale = 1.5;
        const viewport = page.getViewport({ scale });

        const canvas = document.createElement("canvas");
        canvas.className = "pdf-page";
        canvas.width = viewport.width;
        canvas.height = viewport.height;

        const context = canvas.getContext("2d");

        const renderContext = {
          canvasContext: context,
          viewport: viewport
        };

        page.render(renderContext);
        container.appendChild(canvas);
      });
    }
  }).catch(error => {
    container.innerHTML = "<p>⚠️ 无法加载 PDF：" + error.message + "</p>";
  });
</script>


